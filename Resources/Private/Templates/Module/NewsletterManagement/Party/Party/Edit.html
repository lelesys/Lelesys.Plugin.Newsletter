{namespace neos=TYPO3\Neos\ViewHelpers}
<f:layout name="DefaultBackend" />

<f:section name="Content">
	<script type="text/javascript">
		var recipientUrl = '{neos:link.module(path: "newslettermanagement/person", action: "findrecipientbyname")}';
		var inputName = 'moduleArguments[party][recipients][]';
	</script>
	<f:form action="update" object="{party}" objectName="party" id="party">
		<div class="neos-content neos-container-fluid">
			<legend>{party.title}</legend>
			<br />
			<div class="neos-control-group">
				<label for="title"><f:translate id="lelesys.plugin.newsletter.title"></f:translate></label>
				<f:form.textfield property="title" id="title" class="required" />
			</div>
		</div>
		<div class="neos-control-group">
			<label class="neos-control-label" for="recipients"><f:translate id="lelesys.plugin.newsletter.recipients"></f:translate></label>
			<div class="neos-controls">
				<input id="category-recipient">
			</div>
		</div>
		<div class="ui-widget">
			<label class="neos-control-label" for="recipients"><f:translate id="lelesys.plugin.newsletter.newsletterRecipients"></f:translate></label>
			<div id="log" style="height: 200px; width: 300px; overflow: auto;" class="ui-widget-content">
				<f:for each="{selectedRecipients}" as="recipient">
					<div>{recipient.name.fullName}<span class="icon-trash icon-white remove-recipient"></span><input id="{recipient -> f:format.identifier()}" type="hidden" name="moduleArguments[party][recipients][]" value="{recipient -> f:format.identifier()}" /></div>
				</f:for>
			</div>
		</div>
		<div class="neos-form-actions neos-footer">
			<f:link.action action="index" class="neos-btn neos-button"><f:translate id="lelesys.plugin.newsletter.cancel"></f:translate></f:link.action>
			<div class="pull-right">
				<f:form.submit class="neos-btn neos-button-primary neos-button" value="Update" />
			</div>
		</div>
	</f:form>
	<f:render partial="Module/JavaScripts"/>
	<f:render partial="Module/StyleSheets"/>
</f:section>